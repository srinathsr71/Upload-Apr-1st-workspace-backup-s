package Stepdefinitions;


import io.cucumber.java.en.*;
import io.restassured.RestAssured;
import io.restassured.path.json.JsonPath;
import io.restassured.response.Response;
import io.restassured.response.ResponseBody;
import io.restassured.specification.RequestSpecification;
import org.json.simple.JSONObject;
import org.junit.Assert;

import static io.restassured.RestAssured.given;
import static org.junit.Assert.assertEquals;
public class stepDefinition {
	public RequestSpecification httpRequest;
    public Response response;
    public int ResponseCode;
    public ResponseBody body;
    public JSONObject requestParams;
    public JsonPath jsnpath;
    public String s;

	

	@Given("User has API body for adding a pet")
	public void user_has_api_body_for_adding_a_pet() {
		RestAssured.baseURI = "https://fakestoreapi.com/";
        httpRequest = given();
         requestParams = new JSONObject();
		
	}
	@Given("I pass request body as content type")
	public void i_pass_request_body_as_content_type() {
        requestParams.put("name","srinath");
        requestParams.put("description","lorem ipsum set");
        httpRequest.body(requestParams.toJSONString());
        
		
	}
	@When("User calls create a resource API")
	public void user_calls_create_a_resource_api() {
		Response response =httpRequest.post("products");
        ResponseBody body = response.getBody();
        JsonPath jsnpath = response.jsonPath();
        s = jsnpath.getJsonObject("id").toString();
        System.out.println(response.getStatusLine());
        System.out.println(body.asString());
		
	}
	
	@Then("user validates response code")
	public void user_validates_response_code() { 
		ResponseCode = response.getStatusCode();
        Assert.assertEquals(ResponseCode, 200);
	}



}
